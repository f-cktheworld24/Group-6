## 背景与目标

* 在看板视图中为各状态列加入分页，避免一次渲染过多卡片导致页面过长与性能下降。

* 保持现有筛选（Assignee/优先级/技术债务/仅活跃故事）与交互（创建、编辑、删除、复制）不变。

## 现状与约束

* 任务分列与渲染：`frontend/src/App.js:255-280` 生成 `columns`，并在 `frontend/src/App.js:498-585` 全量渲染每列任务。

* 后端当前 `GET /api/tasks` 返回全部任务，无服务器端分页；分页首期采取前端分页以降低改动与复杂度。

* 评审队列区域（右侧面板）通常任务量较小，首期不分页，保持列表完整可见。

## 方案设计（前端分页）

### 分页模型

* 每列独立分页：维护 `pageByStatus`（Map：`{ TODO, IN_PROGRESS, CODE_REVIEW, DONE } -> 当前页码`）。

* 统一页大小 `pageSize`（默认 10，可通过界面或常量调整）。

* 可见任务计算：`visible = columns[status].slice((page-1)*pageSize, page*pageSize)`。

* 当筛选条件变化或创建/删除任务后，重置对应列页码为 1。

### UI/交互设计

* 在每列底部加入分页条：显示“第 X/Y 页，共 N 条”，提供 `« 首页`、`‹ 上一页`、`下一页 ›`、`末页 »` 按钮。

* 禁用逻辑：在第一页禁用“首页/上一页”，在最后一页禁用“下一页/末页”。

* 可选：页大小下拉（10/20/50），变更时当前页回到 1。

### 状态与派生数据

* 新增 `const [pageByStatus, setPageByStatus] = useState({ TODO:1, IN_PROGRESS:1, CODE_REVIEW:1, DONE:1 });`

* 新增 `const [pageSize, setPageSize] = useState(10);`

* `useMemo`：为每列计算 `total = columns[status].length`、`pages = Math.max(1, Math.ceil(total/pageSize))`、`visibleTasks`。

* `useEffect`：当 `columns[status]` 缩减导致当前页超过总页数时，自动夹取回最后一页。

### 空态与边界

* 当某列 `total === 0`：显示“暂无任务”，隐藏分页条。

* 当 `total <= pageSize`：显示“第 1/1 页，共 N 条”，分页按钮均禁用。

### 可选：服务端分页扩展（后续）

* 新增 `GET /api/tasks` 支持查询参数：`status`、`page`、`size`，返回 `{ items, total }`；兼容现有前端结构。

* 前端在任务总量超阈值（如 >1000）时自动切换为服务器端分页模式。

## 代码改动点

* `frontend/src/App.js`

  * 增加分页状态与派生数据（靠近现有 `columns` 计算处 `frontend/src/App.js:255-280`）。

  * 渲染处替换 `columns[status].map(...)` 为 `visibleTasks.map(...)`（`frontend/src/App.js:506-579`）。

  * 在每列 `column-body` 下方新增分页条（紧随 `frontend/src/App.js:580-585`）。

* `frontend/src/App.css`

  * 新增 `.pagination-bar`、按钮样式与禁用态，保持与现有主题一致。

## 验证与测试

* 功能测试：

  * 多筛选组合下分页是否重置与正确夹取边界；创建/删除后页码是否回到 1。

  * 各列任务数量 0/少量/大量（>100）下交互与空态正确显示。

* 性能对比：

  * 模拟 200/500 条任务场景下，首次渲染与分页切换的耗时（目标 75 分位 < 120ms）。

* 可访问性：

  * Tab 键可聚焦分页按钮；提供 `aria-label` 与 `aria-disabled`；焦点样式可见。

* 回归：确保评审队列、燃尽与 CFD 区域不受影响。

## 非功能需求（NFR）

1. 性能：

   * 在 500 条任务情境下，分页切换 DOM 更新时间 75% 分位 < 120ms；首次渲染 75% 分位 < 250ms。

   * 单列同时挂载的卡片不超过 `pageSize`，避免长列表导致的布局抖动。
2. 可访问性（A11y）：

   * 分页控件具备键盘可达性与语义（`button` + `aria-label`）；禁用态明确；颜色对比符合 WCAG AA。
3. 响应式与可用性：

   * 分页条在窄屏下自动换行，点击区域不少于 40x40 像素；控件文案遵循当前语言（中/英）。
4. 可靠性与鲁棒性：

   * 当数据源异常或任务为空时，界面不抛错；页码自动夹取；网络错误保持现有错误提示。
5. 可维护性：

   * 不引入额外库；分页逻辑集中为纯函数/小型 hooks；遵循现有状态管理与代码风格。
6. 国际化准备：

   * 新增分页相关文案集中管理（与 `statusLabels` 同风格），为后续 i18n 预留映射点。

## 风险与缓解

* 大量任务仍可能导致初次列表构建开销：分页仅限制渲染，不减少初次拉取数据；后续可切换到服务端分页。

* 用户熟悉度：新增分页可能改变滚动习惯；通过清晰的页信息与上一/下一页按钮降低学习成本。

## 交付与回滚

* 首期默认启用分页（`pageSize=10`）；如需快速回滚，可通过常量切换或隐藏分页条恢复全量渲染。

## 下一步

* 请确认上述设计与 NFR，确认后我将开始实现、验证并为你提供可交互预览。

